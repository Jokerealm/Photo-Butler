# Photo Butler - AIå›¾ç‰‡ç”Ÿæˆåº”ç”¨

åŸºäºè±†åŒ…APIçš„AIå›¾ç‰‡ç”Ÿæˆç½‘é¡µåº”ç”¨ã€‚ç”¨æˆ·å¯ä»¥ä¸Šä¼ å‚è€ƒå›¾ç‰‡ï¼Œé€‰æ‹©é¢„è®¾çš„é£æ ¼æ¨¡æ¿ï¼Œç¼–è¾‘æç¤ºè¯ï¼Œç„¶åç”Ÿæˆå…·æœ‰ç‰¹å®šè‰ºæœ¯é£æ ¼çš„å›¾ç‰‡ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ“¸ **å›¾ç‰‡ä¸Šä¼ **: æ”¯æŒJPG/PNGæ ¼å¼ï¼Œæœ€å¤§10MB
- ğŸ¨ **æ¨¡æ¿é€‰æ‹©**: å¤šç§é¢„è®¾è‰ºæœ¯é£æ ¼æ¨¡æ¿
- âœï¸ **æç¤ºè¯ç¼–è¾‘**: è‡ªç”±ç¼–è¾‘å’Œè°ƒæ•´ç”Ÿæˆæç¤ºè¯
- ğŸ¤– **AIç”Ÿæˆ**: åŸºäºè±†åŒ…APIçš„é«˜è´¨é‡å›¾ç‰‡ç”Ÿæˆ
- ğŸ’¾ **å†å²è®°å½•**: æœ¬åœ°å­˜å‚¨ç”Ÿæˆå†å²ï¼Œæ”¯æŒæŸ¥çœ‹å’Œç®¡ç†
- ğŸ“± **å“åº”å¼è®¾è®¡**: å®Œç¾é€‚é…æ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡
- â¬‡ï¸ **å›¾ç‰‡ä¸‹è½½**: ä¸€é”®ä¸‹è½½ç”Ÿæˆçš„å›¾ç‰‡

## é¡¹ç›®ç»“æ„

```
photo-butler/
â”œâ”€â”€ frontend/                    # Next.jså‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”œâ”€â”€ components/             # Reactç»„ä»¶
â”‚   â”œâ”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ backend/                     # Expressåç«¯æœåŠ¡å™¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ controllers/        # APIæ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ services/           # ä¸šåŠ¡é€»è¾‘æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ middleware/         # ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ types/              # TypeScriptç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ tests/                       # ç«¯åˆ°ç«¯æµ‹è¯•
â”‚   â””â”€â”€ e2e/                    # Playwrightæµ‹è¯•
â”œâ”€â”€ docs/                        # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ image/                       # æ¨¡æ¿é¢„è§ˆå›¾
â”œâ”€â”€ prompt/                      # æ¨¡æ¿æç¤ºè¯é…ç½®
â”œâ”€â”€ uploads/                     # ä¸´æ—¶æ–‡ä»¶å­˜å‚¨
â””â”€â”€ .env.example                 # ç¯å¢ƒå˜é‡ç¤ºä¾‹
```

## æŠ€æœ¯æ ˆ

### å‰ç«¯
- **Next.js 15+** - Reactå…¨æ ˆæ¡†æ¶
- **React 18+** - ç”¨æˆ·ç•Œé¢åº“
- **TypeScript** - ç±»å‹å®‰å…¨çš„JavaScript
- **Tailwind CSS** - å®ç”¨ä¼˜å…ˆçš„CSSæ¡†æ¶
- **Axios** - HTTPå®¢æˆ·ç«¯

### åç«¯
- **Node.js 18+** - JavaScriptè¿è¡Œæ—¶
- **Express.js** - Webåº”ç”¨æ¡†æ¶
- **TypeScript** - ç±»å‹å®‰å…¨çš„JavaScript
- **Multer** - æ–‡ä»¶ä¸Šä¼ ä¸­é—´ä»¶
- **Sharp** - å›¾ç‰‡å¤„ç†åº“
- **SQLite3** - è½»é‡çº§æ•°æ®åº“ï¼ˆé¢„ç•™ï¼‰

### æµ‹è¯•
- **Jest** - å•å…ƒæµ‹è¯•æ¡†æ¶
- **React Testing Library** - Reactç»„ä»¶æµ‹è¯•
- **Playwright** - ç«¯åˆ°ç«¯æµ‹è¯•
- **fast-check** - å±æ€§æµ‹è¯•åº“

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js 18.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- npm 8.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd photo-butler
```

### 2. å®‰è£…ä¾èµ–

```bash
# å®‰è£…æ ¹ç›®å½•ä¾èµ–ï¼ˆE2Eæµ‹è¯•ï¼‰
npm install

# å®‰è£…åç«¯ä¾èµ–
cd backend
npm install

# å®‰è£…å‰ç«¯ä¾èµ–
cd ../frontend
npm install
```

### 3. é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶å¹¶é…ç½®ï¼š

```bash
# æ ¹ç›®å½•
cp .env.example .env

# åç«¯
cp backend/.env.example backend/.env

# å‰ç«¯
cp frontend/.env.example frontend/.env
```

**é‡è¦**: è¯·åœ¨ `backend/.env` ä¸­é…ç½®æ‚¨çš„è±†åŒ…APIå¯†é’¥ï¼š

```env
DOUBAO_API_KEY=your_actual_api_key_here
```

### 4. åˆå§‹åŒ–æ•°æ®åº“ï¼ˆå¯é€‰ï¼‰

```bash
cd backend
npm run db:init
```

### 5. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

ä½¿ç”¨æä¾›çš„å¯åŠ¨è„šæœ¬ï¼š

```bash
# ä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰
./scripts/dev.sh

# æˆ–è€…æ‰‹åŠ¨å¯åŠ¨
# ç»ˆç«¯1: å¯åŠ¨åç«¯
cd backend
npm run dev

# ç»ˆç«¯2: å¯åŠ¨å‰ç«¯
cd frontend
npm run dev
```

### 6. è®¿é—®åº”ç”¨

- å‰ç«¯åº”ç”¨: http://localhost:3000
- åç«¯API: http://localhost:3001

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°æ¨¡æ¿

1. å°†æ¨¡æ¿é¢„è§ˆå›¾æ·»åŠ åˆ° `image/` ç›®å½•ï¼Œå‘½åæ ¼å¼ï¼š`æ¨¡æ¿åç§°.jpg`
2. åœ¨ `prompt/prompt.txt` ä¸­æ·»åŠ å¯¹åº”çš„æç¤ºè¯
3. é‡å¯æœåŠ¡å™¨ï¼Œæ–°æ¨¡æ¿å°†è‡ªåŠ¨åŠ è½½

### è¿è¡Œæµ‹è¯•

```bash
# å•å…ƒæµ‹è¯•
cd backend && npm test
cd frontend && npm test

# ç«¯åˆ°ç«¯æµ‹è¯•
npm run test:e2e

# æµ‹è¯•è¦†ç›–ç‡
cd backend && npm run test:coverage
```

### ä»£ç æ£€æŸ¥

```bash
# åç«¯ä»£ç æ£€æŸ¥
cd backend && npm run lint

# å‰ç«¯ä»£ç æ£€æŸ¥
cd frontend && npm run lint
```

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
# æ„å»ºåç«¯
cd backend && npm run build

# æ„å»ºå‰ç«¯
cd frontend && npm run build
```

## æ–‡æ¡£

- **[APIæ–‡æ¡£](docs/API.md)** - è¯¦ç»†çš„åç«¯APIæ¥å£æ–‡æ¡£
- **[éƒ¨ç½²æŒ‡å—](docs/DEPLOYMENT.md)** - å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æŒ‡å—
- **[ç¯å¢ƒé…ç½®](docs/ENVIRONMENT.md)** - ç¯å¢ƒå˜é‡é…ç½®æŒ‡å—
- **[æ•…éšœæ’é™¤](docs/TROUBLESHOOTING.md)** - å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ

### ä¸»è¦APIç«¯ç‚¹

- `POST /api/upload` - ä¸Šä¼ å‚è€ƒå›¾ç‰‡
- `GET /api/templates` - è·å–æ¨¡æ¿åˆ—è¡¨
- `POST /api/generate` - ç”ŸæˆAIå›¾ç‰‡
- `GET /api/download/:imageId` - ä¸‹è½½ç”Ÿæˆçš„å›¾ç‰‡

## éƒ¨ç½²æŒ‡å—

### å¼€å‘ç¯å¢ƒå¿«é€Ÿå¯åŠ¨

ä½¿ç”¨æä¾›çš„å¯åŠ¨è„šæœ¬ï¼š

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
./scripts/dev.sh

# åœæ­¢å¼€å‘æœåŠ¡å™¨
./scripts/stop.sh
```

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
./scripts/build.sh

# éƒ¨ç½²åˆ°æœåŠ¡å™¨
# è¯¦è§ docs/DEPLOYMENT.md
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: å›¾ç‰‡ç”Ÿæˆå¤±è´¥**
A: æ£€æŸ¥è±†åŒ…APIå¯†é’¥æ˜¯å¦æ­£ç¡®é…ç½®ï¼Œç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸

**Q: æ–‡ä»¶ä¸Šä¼ å¤±è´¥**
A: ç¡®è®¤æ–‡ä»¶æ ¼å¼ä¸ºJPG/PNGï¼Œå¤§å°ä¸è¶…è¿‡10MB

**Q: å‰ç«¯æ— æ³•è¿æ¥åç«¯**
A: æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦å¯åŠ¨ï¼Œç«¯å£é…ç½®æ˜¯å¦æ­£ç¡®

æ›´å¤šé—®é¢˜è¯·æŸ¥çœ‹ [æ•…éšœæ’é™¤æŒ‡å—](docs/TROUBLESHOOTING.md)

## è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ ISC è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## è‡´è°¢

- [è±†åŒ…API](https://www.volcengine.com/product/doubao) - AIå›¾ç‰‡ç”ŸæˆæœåŠ¡
- [Next.js](https://nextjs.org/) - Reactæ¡†æ¶
- [Tailwind CSS](https://tailwindcss.com/) - CSSæ¡†æ¶
